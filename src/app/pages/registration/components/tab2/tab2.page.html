<!-- <ion-header translucent>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button color="secondary"></ion-back-button>
    </ion-buttons>
    <ion-title color="secondary" translate>Registration</ion-title>
  </ion-toolbar>
</ion-header> -->

<ion-content>
  <ion-card>
    
      <ion-card-content>

        <div style="width: 190px; height: 190px; margin: 0.7rem auto; border: rgb(199, 198, 198) solid 1px; padding: 10px;">
          <div style="position: relative; ">
            <img id="inputImg" [src]="imageUrl || './assets/icon/social-media.svg'">
            <canvas id="overlay"></canvas>
          </div>
        </div>

        <div [ngSwitch]="facesDetected">
          <div *ngSwitchCase="0">
            <p style="text-align: center; color: #DC3545;">
              No se detecto ningún rostro*
            </p>
          </div>
          <div *ngSwitchCase="1">
            <p style="text-align: center; color: #28A745;">
              Se detecto un rostro correctamente*
            </p>
          </div>
          <div *ngSwitchCase="null">
            <p style="text-align: center;">
              Tómate una selfie*
            </p>
          </div>
          <div *ngSwitchDefault>
            <p style="text-align: center; color: rgb(219, 164, 0);">
              Solo deber salir un rostro en la selfie*
            </p>
          </div>
        </div>

        <ion-fab horizontal="end" edge>
          <ion-fab-button (click)="takePhoto()" color="secondary" size="medium">
            <ion-icon style="margin: 0;" src="./assets/icon/interface.svg"></ion-icon>
            <ion-ripple-effect></ion-ripple-effect>
          </ion-fab-button>
        </ion-fab>

        <form [formGroup]="registerForm" (ngSubmit)="register()">
          <ion-list>

            <ion-item>
              <ion-icon name="call-outline"></ion-icon>
              <ion-input type="tel" placeholder="{{ 'registration.phonenumber' | translate }}" formControlName="phoneNumber" clearInput></ion-input>
            </ion-item>
            <app-input-error [control]="registerForm.controls.phoneNumber"></app-input-error>

            <ion-item>
              <ion-icon name="person-circle-outline"></ion-icon>
              <ion-input type="text" placeholder="{{ 'CURP' | translate }}" placeholder="Escribe tu curp ..." formControlName="curp" clearInput></ion-input>
            </ion-item>
            <app-input-error [control]="registerForm.controls.curp"></app-input-error>

            <ion-item>
              <ion-input type="date" placeholder="{{ 'Birthdate' | translate }}" formControlName="birthdate" clearInput></ion-input>
            </ion-item>
            <app-input-error [control]="registerForm.controls.birthdate"></app-input-error>

          </ion-list>
          <br>
          <div class="ion-padding">
            <ion-button type="submit" [disabled]="registerForm.invalid || facesDetected !== 1" expand="block" color="primary">{{ 'registration.registers' | translate }}</ion-button>    
            <ion-button [routerLink]="['/login']" routerDirection="backward" expand="block" fill="clear">{{ 'registration.cancel' | translate }}</ion-button>
          </div>
        </form>
      </ion-card-content>
  
    </ion-card>
  
</ion-content>
